# 図書館管理システム(CLI) テスト仕様書

## 1. テスト概要

| 項目         | 内容 |
|--------------|------|
| 対象システム | 図書館管理システム（Python CLI） |
| テスト目的   | 機能要件に基づき、正常系・異常系の動作確認 |
| テスト方式   | ブラックボックステスト（関数単位） |
| テスト環境   | Python 3.x、ローカル環境、books.json / users.json |



## 2. テスト項目一覧

| テストID | 機能名       | テスト内容                     | 正常/異常 |
|----------|--------------|--------------------------------|-----------|
| T001     | 本の追加     | 新規タイトルを追加             | 正常      |
| T002     | 本の追加     | 既存タイトルを追加             | 異常      |
| T003     | 本の検索     | 部分一致で検索                 | 正常      |
| T004     | 本の削除     | 存在する本を削除               | 正常      |
| T005     | 本の削除     | 存在しない本を削除             | 異常      |
| T006     | 本の更新     | 著者名を変更                   | 正常      |
| T007     | 本の更新     | 存在しない本を更新             | 異常      |
| T008     | ユーザー登録 | 新規ユーザー登録               | 正常      |
| T009     | ユーザー登録 | 既存ユーザーでログイン         | 正常      |
| T010     | 本の貸出     | 貸出可能な本を借りる           | 正常      |
| T011     | 本の貸出     | 貸出中の本を借りる             | 異常      |
| T012     | 本の貸出     | 4冊目を借りようとする          | 異常      |
| T013     | 本の返却     | 借りた本を返却                 | 正常      |
| T014     | 本の返却     | 借りていない本を返却           | 異常      |
| T015     | 履歴表示     | 借りている本の一覧を表示       | 正常      |



## 3. テストケース詳細

### T001: 本の追加（正常）

- 入力：タイトル="吾輩は猫である", 著者="夏目漱石"
- 事前条件：books.json に同タイトルが存在しない
- 期待結果：
  - books.json に新しいエントリが追加される
  - メッセージ「追加しました。」が表示される


### T002: 本の追加（異常）

- 入力：タイトル="人間失格", 著者="太宰治"
- 事前条件：books.json に同タイトルが存在する
- 期待結果：
  - データ変更なし
  - メッセージ「すでに登録されています。」が表示される



### T010: 本の貸出（正常）

- 入力：ユーザー名="taro", タイトル="こころ"
- 事前条件：
  - ユーザー"taro"が2冊以下の本を借りている
  - "こころ"が貸出可能（available=True）
- 期待結果：
  - books["こころ"]["available"] = False
  - users["taro"]["borrowed"] に "こころ" が追加される
  - メッセージ「貸出しました。」が表示される



### T012: 本の貸出（異常：貸出制限）

- 入力：ユーザー名="taro", タイトル="坊っちゃん"
- 事前条件：ユーザー"taro"がすでに3冊借りている
- 期待結果：
  - データ変更なし
  - メッセージ「最大3冊までです。返却してください。」が表示される



### T014: 本の返却（異常）

- 入力：ユーザー名="taro", タイトル="斜陽"
- 事前条件：ユーザー"taro"が"斜陽"を借りていない
- 期待結果：
  - データ変更なし
  - メッセージ「その本は借りていません。」が表示される



## 4. テスト実施方法

- 実行形式：Pythonスクリプトを手動操作
- 検証方法：
  - コンソール出力の確認
  - books.json / users.json の内容を直接確認
- テスト記録：ExcelまたはMarkdownで記録可能




## 5. テスト結果記録（例）

| テストID | 実施日       | 実施者 | 結果 | 備考 |
|----------|--------------|--------|------|------|
| T001     | 2025/10/24   | 開発者A | ○    | 問題なし |
| T002     | 2025/10/24   | 開発者A | ○    | 重複検出成功 |
| T012     | 2025/10/24   | 開発者A | ○    | 貸出制限動作確認済 |

